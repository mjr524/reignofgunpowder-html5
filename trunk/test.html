<!DOCTYPE html>
<html>
<head>
	<title>EaselJS: Simple Graphics Example</title>

	<link href="assets/demoStyles.css" rel="stylesheet" type="text/css" />
	<script type="text/javascript" src="easeljs/utils/UID.js"></script>
	<script type="text/javascript" src="easeljs/geom/Matrix2D.js"></script>
	<script type="text/javascript" src="easeljs/display/DisplayObject.js"></script>
	<script type="text/javascript" src="easeljs/display/Container.js"></script>
	<script type="text/javascript" src="easeljs/display/Stage.js"></script>
	<script type="text/javascript" src="easeljs/events/MouseEvent.js"></script>
	<script type="text/javascript" src="easeljs/display/Shape.js"></script>
	<script type="text/javascript" src="easeljs/display/Graphics.js"></script>
	<script type="text/javascript" src="easeljs/utils/Ticker.js"></script>
	<script type="text/javascript" src="easeljs/display/Bitmap.js"></script>
	<script type="text/javascript" src="easeljs/display/Text.js"></script>
	<script type="text/javascript" src="easeljs/geom/Rectangle.js"></script>

	<!-- We also provide hosted minified versions of all CreateJS libraries.
	  http://code.createjs.com -->

	<script type="text/javascript">
	var canvas;
	var stage;
	var fpsLabel;
	var map;
	var bombe;
	var bomberouge;
	var AGAUCHE;
	var ADROITE;
	var ENBAS;
	var ENHAUT;
	var ROUGE;
	
	var KEYCODE_ENTER = 13;		//usefull keycode
	var KEYCODE_SPACE = 32;		//usefull keycode
	var KEYCODE_DOWN = 40;
	var KEYCODE_UP = 38;		//usefull keycode
	var KEYCODE_LEFT = 37;		//usefull keycode
	var KEYCODE_RIGHT = 39;		//usefull keycode
	var KEYCODE_W = 87;			//usefull keycode
	var KEYCODE_A = 65;			//usefull keycode
	var KEYCODE_D = 68;			//usefull keycode

	//register key functions
	document.onkeydown = handleKeyDown;
	document.onkeyup = handleKeyUp;
	
	 function init(){
        canvas = document.getElementById('myCanvas');
		width = canvas.width;
		height = canvas.height;
        stage = new createjs.Stage(canvas);
		
		map = new createjs.Bitmap("images/background.png");
		bombe = new createjs.Bitmap("images/bomb.png");
		bomberouge = new createjs.Bitmap("images/bomb2.png");
		bombe.y = 150;
		
		fpsLabel = new createjs.Text("-- fps","bold 14px Arial","#000");
		fpsLabel.x = 10;
		fpsLabel.y = 10;
		
		stage.addChild(map);
		stage.addChild(bombe);
		stage.addChild(fpsLabel);
        stage.update();
		
        createjs.Ticker.setFPS(100);
        createjs.Ticker.addListener(window);
      }
      

      function tick(){
		//bombe.x += 5;
		if (ADROITE){bombe.x +=10;bomberouge.x +=10;}
		if (AGAUCHE){bombe.x -=10;bomberouge.x -=10;}
		if (ENHAUT){bombe.y -=10;bomberouge.y -=10;}
		if (ENBAS){bombe.y +=10;bomberouge.y +=10;}
		if (ROUGE){bombe = bomberouge;}
		//if (!ROUGE){bombe = new createjs.Bitmap("../images/bomb.png")};
		
		fpsLabel.text = Math.round(createjs.Ticker.getMeasuredFPS())+" fps";
        stage.update();
      }
	  
	  function handleKeyDown(e) {
		//cross browser issues exist
		if(!e){ var e = window.event; }
		switch(e.keyCode) {
			case KEYCODE_SPACE:	ROUGE = true;break;
			case KEYCODE_A:
			case KEYCODE_LEFT:	AGAUCHE = true; break;
			case KEYCODE_D:
			case KEYCODE_RIGHT: ADROITE = true; break;
			case KEYCODE_W:
			case KEYCODE_UP:	ENHAUT = true; break;
			case KEYCODE_DOWN:	ENBAS = true; break;
		}
	}
	  
	  function handleKeyUp(e) {
		//cross browser issues exist
		if(!e){ var e = window.event; }
		switch(e.keyCode) {
			case KEYCODE_SPACE:	ROUGE = false;break;
			case KEYCODE_A:
			case KEYCODE_LEFT:	AGAUCHE = false; break;
			case KEYCODE_D:
			case KEYCODE_RIGHT: ADROITE = false; break;
			case KEYCODE_W:
			case KEYCODE_UP:	ENHAUT = false; break;
			case KEYCODE_DOWN:	ENBAS = false; break;
		}
	}
	
	 
	  
	</script>

</head>
<body onload="init()">

	<header id="header" class="EaselJS">
	    <h1><span class="text-product">Reign of GunPowder</h1>
	    <p>Test du jeu</p>
	</header>

	<canvas id="myCanvas" width="1000" height="750"></canvas>

</body>
</html>